<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Campus Drivers</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@300;400;600;700;800;900&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg-top:#545a66; /* gradient top */
      --bg-bottom:#272c34; /* gradient bottom */
      --brand:#f6d9ea; /* logo + buttons */
      --text:#e7e9ee;
      --muted:#aeb5c2;
      --ok:#19c37d;
      --no:#ff5a5f;
      --card:#313844;
      --stroke:#404856;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:"Nunito Sans",system-ui,-apple-system,Segoe UI,Roboto,Arial,Helvetica,sans-serif; color:var(--text);
      background: linear-gradient(180deg,var(--bg-bottom),var(--bg-top));
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    }
    /* Layout */
    .app{min-height:100dvh; display:flex; align-items:center; justify-content:center;}
    .screen{width:100%; max-width:560px; margin:auto; padding:20px; display:none;}
    .center{display:flex; align-items:center; justify-content:center; text-align:center}
    .card{background:rgba(255,255,255,.03); border:1px solid var(--stroke); border-radius:20px; padding:18px; box-shadow:0 6px 24px rgba(0,0,0,.25)}
    .logo{width:min(220px,60vw); height:auto; display:block; margin:0 auto 18px}
    h1,h2,h3{margin:0 0 8px}
    p{margin:6px 0 0; color:var(--muted)}

    /* Buttons */
    .btn{appearance:none; border:0; border-radius:14px; padding:14px 18px; font-weight:800; letter-spacing:.3px; cursor:pointer; transition:.2s transform ease, .2s filter ease;}
    .btn.brand{background:var(--brand); color:#171a21}
    .btn.ghost{background:transparent; color:var(--brand); border:1px dashed var(--brand)}
    .btn:active{transform:scale(.98)}
    .actions{display:grid; gap:12px}

    /* Loader dots ring */
    .ring{--s:66px; width:var(--s); height:var(--s); position:relative; margin:14px auto}
    .ring i{position:absolute; inset:0; border-radius:50%; border:4px dotted var(--brand); animation:spin 1.8s linear infinite; filter:drop-shadow(0 0 6px rgba(246,217,234,.5))}
    @keyframes spin{to{transform:rotate(1turn)}}

    /* List / driver cards */
    .grid{display:grid; gap:12px}
    .driver{display:grid; grid-template-columns:88px 1fr; gap:12px; align-items:center}
    .thumb{width:88px; height:88px; border-radius:14px; overflow:hidden; border:1px solid var(--stroke); background:#000}
    .thumb img{width:100%; height:100%; object-fit:cover}
    .driver h3{font-size:18px}
    .sub{font-size:13px; color:var(--muted)}
    .meta{display:flex; gap:10px; align-items:center; flex-wrap:wrap; margin-top:6px}
    .pill{font-size:12px; padding:6px 10px; border-radius:999px; background:#222833; border:1px solid var(--stroke)}
    .pill.ok{background:#0f2b22; color:#b6f4d6; border-color:#1d5a46}
    .pill.no{background:#321e22; color:#ffc8cf; border-color:#7a2a35}
    .rating{display:flex; gap:2px; font-size:18px; cursor:pointer}
    .like{margin-left:auto; font-size:20px; cursor:pointer; user-select:none}

    /* Profile */
    .profile-hero{display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-bottom:12px}
    .profile-hero .ph{height:160px; border-radius:14px; overflow:hidden; border:1px solid var(--stroke)}
    .profile-hero .ph img{width:100%; height:100%; object-fit:cover}
    .stats{display:grid; grid-template-columns:repeat(3,1fr); gap:8px; margin:10px 0 14px}
    .stat{background:var(--card); border:1px solid var(--stroke); border-radius:12px; padding:10px; text-align:center}
    .label{font-size:11px; color:var(--muted)}
    .val{font-weight:800; font-size:16px}
    .comments{margin-top:10px}
    .comment{background:rgba(255,255,255,.03); border:1px solid var(--stroke); border-radius:12px; padding:10px; margin-top:8px}
    .input{width:100%; background:#212733; border:1px solid var(--stroke); color:var(--text); border-radius:12px; padding:12px; outline:none}

    /* Admin */
    .field{display:grid; gap:6px; margin-bottom:12px}
    .fields.inline{grid-template-columns:1fr 1fr; gap:10px}
    label{font-size:12px; color:var(--muted)}
    table{width:100%; border-collapse:collapse; font-size:13px; overflow:hidden; border-radius:12px; border:1px solid var(--stroke)}
    th,td{padding:10px; border-bottom:1px solid var(--stroke)}
    th{text-align:left; color:var(--muted); font-weight:700}
    tr:last-child td{border-bottom:0}

    /* Planner */
    .planner{background:#0f141c; border:1px solid var(--stroke); border-radius:16px; overflow:hidden}
    .planner .header{display:grid; grid-template-columns:80px repeat(7,1fr); background:#121826; border-bottom:1px solid var(--stroke)}
    .planner .cell,.planner .hcell{padding:10px; border-right:1px solid var(--stroke)}
    .planner .hcell{font-weight:700; color:var(--muted); text-align:center}
    .planner .row{display:grid; grid-template-columns:80px repeat(7,1fr)}
    .time{color:var(--muted); font-size:12px}
    .slot{min-height:46px; border-right:1px solid var(--stroke); border-bottom:1px solid var(--stroke); position:relative}
    .event{position:absolute; inset:6px; background:#1f2532; border:1px solid var(--stroke); border-left:3px solid var(--brand); border-radius:10px; padding:6px 8px; display:flex; flex-direction:column; gap:2px}
    .event .t{font-weight:800; font-size:12px}
    .event .s{font-size:11px; color:var(--muted)}

    /* Nav / back */
    .topbar{display:flex; align-items:center; gap:10px; margin-bottom:12px}
    .back{background:transparent; border:1px solid var(--stroke); color:var(--text); border-radius:10px; padding:8px 10px; font-weight:700}

    /* Video screen */
    video{display:block}

    /* Fullscreen-like video */
    .video-stage{padding:0; max-width:none}
    .fs-video{position:fixed; inset:0; width:100vw; height:100vh; object-fit:cover; border:0; border-radius:0; background:#000}
    body.video-playing{overflow:hidden}

    /* Map */
    .map{position:relative; border-radius:16px; overflow:hidden; border:1px solid var(--stroke)}
    .map img{display:block; width:100%; height:auto}
    .carpin{position:absolute; width:42px; aspect-ratio:1; border-radius:50%; background:var(--brand); bottom:20%; left:48%; display:grid; place-items:center; font-weight:900; color:#111}

    /* small helpers */
    .muted{color:var(--muted)}
    .sp8{height:8px}
    .sp12{height:12px}
    .sp16{height:16px}
    .right{margin-left:auto}
  </style>
</head>
<body>
  <div class="app">
    <!-- Screen 1: install/loading -->
    <section id="s-install" class="screen center" aria-label="Installing">
      <div>
        <img src="logo.png" alt="Campus Drivers logo" class="logo"/>
        <div class="ring"><i></i></div>
        <div class="muted">installation…</div>
      </div>
    </section>

    <!-- Screen 2: intro video -->
    <section id="s-video" class="screen video-stage">
      <video id="introVideo" class="fs-video" playsinline muted src="animation-logo.mp4"></video>
    </section>

    <!-- Screen 3: home (Book/Admin) -->
    <section id="s-home" class="screen center">
      <div class="card">
        <img src="logo.png" alt="Campus Drivers" class="logo"/>
        <div class="actions">
          <button class="btn brand" onclick="go('s-book')">Book your driver</button>
          <button class="btn ghost" onclick="go('s-admin-login')">Admin</button>
        </div>
      </div>
    </section>

    <!-- Screen 4: drivers list -->
    <section id="s-book" class="screen">
      <div class="topbar"><button class="back" onclick="go('s-home')">◀ Back</button><h3>Choose your driver</h3></div>
      <div id="drivers" class="grid"></div>
    </section>

    <!-- Screen 5: profile -->
    <section id="s-profile" class="screen">
      <div class="topbar">
        <button class="back" onclick="go('s-book')">◀ Back</button>
        <h3 id="p-name">Driver</h3>
        <button class="btn brand right" onclick="confirmBooking()">Confirm / Book</button>
      </div>
      <div class="profile-hero">
        <div class="ph"><img id="p-photo" alt="driver photo"></div>
        <div class="ph"><img id="p-car" alt="car photo"></div>
      </div>
      <div id="p-quote" class="muted" style="margin-bottom:8px"></div>
      <div class="stats">
        <div class="stat"><div class="label">Total rides</div><div class="val" id="p-rides">–</div></div>
        <div class="stat"><div class="label">Avg. rating</div><div class="val" id="p-rating">–</div></div>
        <div class="stat"><div class="label">Km driven</div><div class="val" id="p-km">–</div></div>
      </div>
      <div class="card">
        <h3>Engine & car notes</h3>
        <p id="p-engine" class="muted"></p>
      </div>
      <div class="comments">
        <h3>Comments</h3>
        <div class="sp8"></div>
        <input id="commentInput" class="input" placeholder="Leave a comment…" onkeydown="if(event.key==='Enter') addComment()"/>
        <div class="sp8"></div>
        <button class="btn brand" onclick="addComment()">Post</button>
        <div id="commentsList"></div>
      </div>
    </section>

    <!-- Screen 6: fake navigation / confirmation -->
    <section id="s-confirm" class="screen">
      <div class="topbar"><button class="back" onclick="go('s-profile')">◀ Back</button><h3>Booking</h3></div>
      <div class="card">
        <h3 id="c-title">Ride confirmed</h3>
        <p class="muted">Pickup: Belrose Campus • Destination: Downtown • ETA: 12 min</p>
      </div>
      <div class="sp12"></div>
      <div class="map"><img src="map.png" alt="map"><div class="carpin">🚗</div></div>
      <div class="sp12"></div>
      <button class="btn brand" onclick="go('s-home')">Back to Home</button>
    </section>

    <!-- Screen 7: admin login -->
    <section id="s-admin-login" class="screen">
      <div class="topbar"><button class="back" onclick="go('s-home')">◀ Back</button><h3>Admin login</h3></div>
      <div class="card">
        <div class="field"><label>Username (first name)</label><input id="admUser" class="input" autocomplete="username" placeholder="e.g. Lane"></div>
        <div class="field"><label>Password (last name)</label><input id="admPass" class="input" type="password" autocomplete="current-password" placeholder="e.g. O'Neill"></div>
        <button class="btn brand" onclick="adminLogin()">Enter Driver Profile</button>
        <p class="muted" style="margin-top:8px">Tip: Lane / O'Neill • Donovan / Wentworth • Lewis / Prescott • Adam / Kingsley</p>
      </div>
    </section>

    <!-- Screen 8: admin dashboard -->
    <section id="s-admin" class="screen">
      <div class="topbar">
        <button class="back" onclick="go('s-admin-login')">◀ Logout</button>
        <h3 id="a-title">Driver Admin</h3>
        <button class="btn brand right" onclick="go('s-planner')">Planner</button>
      </div>
      <div class="card">
        <div class="profile-hero">
          <div class="ph"><img id="a-photo" alt="driver"></div>
          <div class="ph"><img id="a-car" alt="car"></div>
        </div>
        <div class="fields inline">
          <div class="field"><label>Current car</label><input id="a-car-name" class="input" readonly></div>
          <div class="field"><label>Engine</label><input id="a-car-engine" class="input" readonly></div>
        </div>
        <div class="fields inline">
          <div class="field"><label>Week earnings</label><input id="a-ew" class="input" readonly></div>
          <div class="field"><label>Month earnings</label><input id="a-em" class="input" readonly></div>
        </div>
        <div class="field"><label>Year earnings</label><input id="a-ey" class="input" readonly></div>
      </div>
      <div class="sp12"></div>
      <div class="card">
        <h3>Ride history</h3>
        <div class="sp8"></div>
        <table id="a-history"><thead><tr><th>Client</th><th>Rating</th><th>Snippet</th></tr></thead><tbody></tbody></table>
      </div>
    </section>

    <!-- Screen 9: weekly planner -->
    <section id="s-planner" class="screen">
      <div class="topbar"><button class="back" onclick="go('s-admin')">◀ Back</button><h3>Weekly planning</h3></div>
      <div id="planner" class="planner"></div>
    </section>
  </div>

  <script>
    // -------- Data --------
    const drivers = [
      {
        id:'lane', first:'Lane', last:"O'Neill", age:21,
        car:'CHEVROLET CAMARO CABRIOLET PACK SS V8 1967',
        engine:'6.5L V8 • 375 hp • Manual',
        photo:'lane-photo.jpg', carPhoto:'camar o.jpg'.replace(' ',''), // just in case
        rating:4.8, rides:312, km:17840,
        likes:false, available:true,
        comments:["Smoothest ride in Belrose.", "Always early, always classy."]
      },
      {
        id:'donovan', first:'Donovan', last:'Wentworth', age:21,
        car:'OLDSMOBILE 442 1970', engine:'7.5L V8 • 370 hp • Auto',
        photo:'donovan-photo.jpg', carPhoto:'oldsmobile.jpg',
        rating:4.6, rides:287, km:15210, likes:false, available:true,
        comments:["Soundtrack on point.", "Great with luggage even on crutches!"]
      },
      {
        id:'lewis', first:'Lewis', last:'Prescott', age:21,
        car:'FORD MUSTANG CONVERTIBLE 1964', engine:'4.7L V8 • 271 hp • Manual',
        photo:'lewis-photo.jpg', carPhoto:'mustang.jpg',
        rating:4.7, rides:334, km:20110, likes:false, available:true,
        comments:["Party starter but safe driver.", "‘Driver talks too much’? Two stars? him??"]
      },
      {
        id:'adam', first:'Adam', last:'Kingsley', age:21,
        car:'PONTIAC LEMANS 1968', engine:'5.3L V8 • 250 hp • Auto',
        photo:'adam-photo.jpg', carPhoto:'lemans.jpg',
        rating:4.5, rides:245, km:13150, likes:false, available:false,
        comments:["Chill vibes. Premium scent."]
      }
    ];

    const adminCtx = { current:null };

    // -------- Navigation --------
    const screens = Array.from(document.querySelectorAll('.screen'));
    function go(id){
      screens.forEach(s=>s.style.display = (s.id===id?'block':'none'));
      // Autoplay the video when entering video screen
      if(id==='s-video'){
        startIntroVideo();
      }
    }

    // Boot: install -> 6s -> video -> home
    window.addEventListener('load',()=>{
      go('s-install');
      setTimeout(()=>{ go('s-video'); }, 6000);
      renderDrivers();
    });
      setTimeout(()=>{ go('s-video'); }, 6000);
      renderDrivers();
    });

    // -------- Drivers list --------
    function renderDrivers(){
      const wrap = document.getElementById('drivers');
      wrap.innerHTML = '';
      drivers.forEach((d,i)=>{
        const card = document.createElement('div');
        card.className = 'card driver';
        card.innerHTML = `
          <div class="thumb"><img src="${d.carPhoto}" alt="${d.car}"></div>
          <div>
            <h3>${d.first} ${d.last}</h3>
            <div class="sub">${d.car}</div>
            <div class="meta">
              <div class="pill ${d.available?'ok':'no'}" onclick="toggleAvail(${i})">${d.available?'Available':'Unavailable'}</div>
              <div class="rating" aria-label="rating" data-i="${i}">${starsHTML(d.rating)}</div>
              <div class="pill">${d.rides} rides</div>
              <div class="pill">${d.km.toLocaleString()} km</div>
              <div class="like" onclick="toggleLike(${i})">${d.likes?'❤️':'🤍'}</div>
              <button class="btn brand right" onclick="openProfile(${i})">Open profile</button>
            </div>
          </div>`;
        wrap.appendChild(card);
      });
      // Bind ratings
      wrap.querySelectorAll('.rating').forEach(el=>{
        el.addEventListener('click',e=>{
          const i = +el.dataset.i; setRating(i);
        });
      });
    }

    function starsHTML(avg){
      const full = Math.round(avg);
      return '★★★★★'.slice(0,full) + '<span class="muted">' + '★★★★★'.slice(full) + '</span>'
    }
    function setRating(i){
      const r = prompt('Set rating 1-5 for '+drivers[i].first, drivers[i].rating);
      if(!r) return; const val = Math.max(1,Math.min(5,parseFloat(r)));
      drivers[i].rating = val; renderDrivers(); if(adminCtx.current?.id===drivers[i].id) loadProfile(i);
    }
    function toggleLike(i){ drivers[i].likes = !drivers[i].likes; renderDrivers(); }
    function toggleAvail(i){ drivers[i].available = !drivers[i].available; renderDrivers(); }

    // -------- Profile --------
    let currentIndex = 0;
    function openProfile(i){ currentIndex = i; loadProfile(i); go('s-profile'); }
    function loadProfile(i){
      const d = drivers[i];
      setText('p-name', d.first + ' ' + d.last);
      byId('p-photo').src = d.photo; byId('p-car').src = d.carPhoto;
      setText('p-rides', d.rides); setText('p-rating', d.rating.toFixed(1)); setText('p-km', d.km.toLocaleString());
      setText('p-engine', d.engine);
      // fun scripted note for Lewis
      setText('p-quote', d.id==='lewis' ? "Lewis opens the app and scrolls through his latest reviews. ‘He gave me 2 stars? \u2018Driver talks too much.\u2019?’" : '');
      const list = byId('commentsList'); list.innerHTML='';
      d.comments.forEach(c=> list.appendChild(commentEl(c)) );
    }
    function commentEl(text){
      const div = document.createElement('div'); div.className='comment'; div.textContent=text; return div;
    }
    function addComment(){
      const el = byId('commentInput'); const t = el.value.trim(); if(!t) return; drivers[currentIndex].comments.unshift(t); el.value=''; loadProfile(currentIndex);
    }
    function confirmBooking(){
      const d = drivers[currentIndex];
      setText('c-title', `Booked: ${d.first} ${d.last} • ${d.car}`);
      go('s-confirm');
    }

    // -------- Admin --------
    function adminLogin(){
      const u = byId('admUser').value.trim().toLowerCase();
      const pRaw = byId('admPass').value.trim().toLowerCase();
      // normalize O'Neill -> oneill
      const norm = s=>s.replace(/[^a-z0-9]/g,'');
      const d = drivers.find(x=> x.first.toLowerCase()===u && norm(x.last.toLowerCase())===norm(pRaw));
      if(!d){ alert('Invalid credentials'); return; }
      adminCtx.current = d; loadAdmin(d); go('s-admin');
    }
    function loadAdmin(d){
      setText('a-title', d.first + ' ' + d.last);
      byId('a-photo').src = d.photo; byId('a-car').src = d.carPhoto;
      byId('a-car-name').value = d.car; byId('a-car-engine').value = d.engine;
      // mock earnings
      const week = (d.rides*22).toFixed(0), month=(d.rides*88).toFixed(0), year=(d.rides*880).toFixed(0);
      byId('a-ew').value = '$' + Number(week).toLocaleString();
      byId('a-em').value = '$' + Number(month).toLocaleString();
      byId('a-ey').value = '$' + Number(year).toLocaleString();
      // history
      const tb = byId('a-history').querySelector('tbody'); tb.innerHTML='';
      const names = ['Ava Carter','Maya Singh','Noah Brooks','Leo Turner','Sofia Nguyen','Emma Jones','Ethan Clark'];
      for(let i=0;i<7;i++){
        const tr = document.createElement('tr');
        const rate = (Math.random()*1+4).toFixed(1);
        const snips = ['Perfect ride!','Clean car, good music.','Would book again.','Talks a lot but funny!','Fast pick-up.','Smooth driving.','Great energy.'];
        tr.innerHTML = `<td>${names[i]}</td><td>${rate}★</td><td>${snips[i]}</td>`;
        tb.appendChild(tr);
      }
      buildPlanner(d);
    }

    // -------- Planner (fake, Apple-ish dark) --------
    function buildPlanner(d){
      const days = ['Mon','Tue','Wed','Thu','Fri','Sat','Sun'];
      const root = byId('planner'); root.innerHTML='';
      // header
      const header = document.createElement('div'); header.className='header';
      header.innerHTML = '<div class="hcell">Time</div>' + days.map(x=>`<div class="hcell">${x}</div>`).join('');
      root.appendChild(header);
      // rows (08:00 -> 22:00)
      for(let h=8; h<=22; h++){
        const row = document.createElement('div'); row.className='row';
        const time = document.createElement('div'); time.className='cell time'; time.textContent = `${String(h).padStart(2,'0')}:00`;
        row.appendChild(time);
        for(let dI=0; dI<7; dI++){
          const slot = document.createElement('div'); slot.className='slot';
          // randomly add pretty event blocks
          if(Math.random()<0.18){
            const e = document.createElement('div'); e.className='event';
            e.innerHTML = `<div class="t">${['Ride','Pickup','Airport','VIP'][Math.floor(Math.random()*4)]}</div><div class="s">${['Lois','Becca','Max','Elena','Prudence','Hope'][Math.floor(Math.random()*6)]} • ${String(h).padStart(2,'0')}:${['00','15','30','45'][Math.floor(Math.random()*4)]}</div>`;
            slot.appendChild(e);
          }
          row.appendChild(slot);
        }
        root.appendChild(row);
      }
    }

    // -------- Video helpers --------
    function startIntroVideo(){
      const v = byId('introVideo');
      document.body.classList.add('video-playing');
      // ensure start from 0 and hide controls
      v.removeAttribute('controls');
      v.currentTime = 0;
      const tryPlay = ()=> v.play().then(()=>{ /* ok */ }).catch(()=>{ showTapOverlay(); });
      tryPlay();
      v.onended = ()=>{ document.body.classList.remove('video-playing'); go('s-home'); };
    }
    function showTapOverlay(){
      if(document.getElementById('tapOverlay')) return;
      const o = document.createElement('div');
      o.id='tapOverlay';
      o.style.cssText='position:fixed;inset:0;display:grid;place-items:center;background:rgba(0,0,0,.6);color:white;font-weight:900;font-size:18px;letter-spacing:.5px;z-index:9;';
      o.textContent='Tap to start';
      o.addEventListener('click',()=>{ o.remove(); byId('introVideo').play().catch(()=>{}); });
      document.body.appendChild(o);
    }

    // -------- Utils --------
    function byId(id){ return document.getElementById(id); }
    function setText(id,t){ byId(id).textContent=t; }
  </script>
</body>
</html>
